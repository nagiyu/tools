# Convert Transfer ツール

## 概要

Convert Transfer ツールは、交通機関の運賃データから必要な部分を抽出し、整形するためのツールです。

## 機能

### 基本変換機能

- **マーカー抽出**: 「■」マーカーから「(運賃内訳)」マーカーまでのテキストを抽出
- **不要データ削除**: 抽出したテキストから「---\n」を除去
- **クリップボード連携**: 変換前のテキストをクリップボードから読み込み、変換後のテキストをクリップボードにコピー

### 日付挿入機能

変換後のテキストに日付を追加できます。

- **日付選択**: 変換後のタブで日付ピッカーを使用して日付を選択
- **曜日表示**: チェックボックスで日本語の曜日表示のオン/オフを切り替え
- **自動挿入**: 選択した日付が「YYYY/MM/DD」形式（曜日含む場合は「YYYY/MM/DD(曜)」形式）で変換後のテキストの先頭に追加
- **リアルタイム更新**: 日付を変更すると変換後のテキストも自動更新

## 使用方法

### 1. 基本的な使用方法

1. **変換前タブ**で変換したいテキストを入力
   - 直接入力、または「Read」ボタンでクリップボードから読み込み
2. 「Convert」ボタンをクリックして変換実行
3. **変換後タブ**に自動切り替えされ、変換結果が表示

### 2. 日付付きで変換

1. 上記の基本的な使用方法で変換を実行
2. **変換後タブ**で日付ピッカーを使用して日付を選択
3. 必要に応じて「曜日を含める」チェックボックスをオンにして曜日表示を有効化
4. 選択した日付が変換後のテキストの先頭に自動追加
5. 「Copy」ボタンで結果をクリップボードにコピー

## シェアシート連携

スマートフォンの共有機能から直接 Convert Transfer ツールを起動できます。

1. 他のアプリで共有ボタンをタップ
2. 共有先から「Tools」を選択
3. 共有されたテキストが自動的に変換前タブに入力される

詳細は [シェアシート対応ドキュメント](./sharesheet.md) を参照してください。

## 入力形式

変換対象のテキストは以下の形式を含む必要があります：

```
（前略）
■ [抽出したい内容]
---
[追加の詳細情報]
(運賃内訳)
（後略）
```

## 出力形式

### 日付なしの場合
```
■ [抽出したい内容]
[追加の詳細情報]
```

### 日付ありの場合
```
2024/01/15
■ [抽出したい内容]
[追加の詳細情報]
```

### 日付+曜日ありの場合
```
2024/01/15(月)
■ [抽出したい内容]
[追加の詳細情報]
```

## 技術仕様

- **フロントエンド**: React (Next.js)
- **日付処理**: dayjs with timezone support (JST)
- **日付入力**: Material-UI DatePicker component
- **バックエンド**: ConvertTransferService (TypeScript)

## 制限事項

- 「■」マーカーと「(運賃内訳)」マーカーが両方存在しない場合は、元のテキストがそのまま返される
- 日付は日本時間（JST）で処理される
- 日付フォーマットは「YYYY/MM/DD」固定、曜日付きの場合は「YYYY/MM/DD(曜)」形式
- 曜日は日本語表記（日、月、火、水、木、金、土）で表示される